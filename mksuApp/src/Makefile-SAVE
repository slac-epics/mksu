# Makefile
TOP = ../..
ifdef EPICS_HOST_ARCH

include $(TOP)/configure/CONFIG
#----------------------------------------
#  ADD MACRO DEFINITIONS AFTER THIS LINE

# No optimization, we want debugging info:
HOST_OPT=NO

# On WIN32, have to add socket library
# to build the test program
SYS_PROD_LIBS_WIN32 = wsock32

PROD_HOST += mksu_test
mksu_test_SRCS += mksu_test.c
mksu_test_LIBS += Com

DBD = mksu.dbd
DBD += drvEtherIP.dbd

LIBRARY_IOC = mksu

# create munch file for dynamic loading will install in <bin>
PROD_IOC_vxWorks += mksuLib

LIB_LIBS += asyn
LIB_LIBS += $(EPICS_BASE_IOC_LIBS) 
DLL_LIBS = ca Com
SYS_DLL_LIBS = wsock32
mksu_RCS_WIN32 = mksu.rc

mksu_SRCS += dl_list.c 
mksu_SRCS += mem_string_file.c
mksu_SRCS += mksu.c 
mksu_SRCS += drvEtherIP.c 
mksu_SRCS += devEtherIP.c 
mksu_SRCS += drvEtherIPRegister.cpp
mksu_SRCS += MksuDriver.cpp
mksu_SRCS += MksuComm.cpp

# The PROD_IOC_vxWorks is built from the same srcs and must include
# the registry routines.
mksuLib_SRCS+=$(mksu_SRCS)
mksuLib_SRCS+=mksu_registerRecordDeviceDriver.cpp

include $(TOP)/configure/RULES
#----------------------------------------
#  ADD RULES AFTER THIS LINE

else

include $(TOP)/config/CONFIG_APP
include $(TOP)/config/RULES_ARCHS

endif
