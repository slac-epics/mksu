#=======================================================
# Trigger Control Block
# Please add a comment line between registers
# Current script can't deal with empty lines, sorry
#=======================================================
#
# CONTROL BLOCK (WRITE)
#
# The desired bits are written to the IOC using the bo
# records, which FLNK to calc records used to shift
# the bit to its correct place. The result is used
# to actualy write out using the ao (asyn) record.
#
# All the ao (asyn) records for a given register
# appears one time for each bit, e.g. STATUS_FADC_SET
# and STATUS_CLCKDL_SET.
#
#=======================================================
# Status Register (BEGIN)
#-------------------------------------------------------
# FADC_CLR: FAST ADC Data Clock PLL Not Locked Latch
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):FADC_CLR
operation	record
DESC	Clear FADC Latch
FLNK	KLYS:$(AREA):$(LOCATION):FADC_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FADC_CLR_MASK
DESC	Clear FADC Latch
INPA	KLYS:$(AREA):$(LOCATION):FADC_CLR
CALC	A << 10
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_FADC_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_FADC_SET
operation	write
task	0x01
address	0
size	1
DESC	MKSU Status (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_FADC_SET
DOL	KLYS:$(AREA):$(LOCATION):FADC_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# CLCKDL_CLR: Sys Clock PLL Not Locked Latch
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):CLCKDL_CLR
operation	record
DESC	Clear Clck PLL Latch
FLNK	KLYS:$(AREA):$(LOCATION):CLCKDL_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):CLCKDL_CLR_MASK
DESC	Clear FADC Latch
INPA	KLYS:$(AREA):$(LOCATION):CLCKDL_CLR
CALC	A << 11
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_CLCKDL_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_CLCKDL_SET
operation	write
task	0x01
address	0
size	1
DESC	MKSU Status (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_CLCKDL_SET
DOL	KLYS:$(AREA):$(LOCATION):CLCKDL_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# Status Register (END)
#-------------------------------------------------------
# Control Set Register (BEGIN)
#-------------------------------------------------------
# PERMIT_SET: Set the PERMIT bit (Bit 0)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):PERMIT_SET
operation	record
DESC	Permit set
FLNK	KLYS:$(AREA):$(LOCATION):PERMIT_SET_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):PERMIT_SET_MASK
DESC	Clear FADC Latch
INPA	KLYS:$(AREA):$(LOCATION):PERMIT_SET
CALC	A
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_PERMIT_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_PERMIT_SET
operation	write
task	0x01
address	1
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_PERMIT_SET
DOL	KLYS:$(AREA):$(LOCATION):PERMIT_SET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# TREN_SET: Set Trigger Enable bit (Bit 1)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):TREN_SET
operation	record
DESC	Trigger Enable (Set)
FLNK	KLYS:$(AREA):$(LOCATION):TREN_SET_MASK
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TREN_SET_MASK
DESC	Triggen Enable (Set)
INPA	KLYS:$(AREA):$(LOCATION):TREN_SET
CALC	A << 1
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_TREN_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_TREN_SET
operation	write
task	0x01
address	1
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_TREN_SET
DOL	KLYS:$(AREA):$(LOCATION):TREN_SET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# CFGD_SET: Configured bit (Bit 2)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):CFGD_SET
operation	record
DESC	Configured (Set)
FLNK	KLYS:$(AREA):$(LOCATION):CFGD_SET_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):CFGD_SET_MASK
DESC	Configured (Set)
INPA	KLYS:$(AREA):$(LOCATION):CFGD_SET
CALC	A << 2
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_CFGD_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_CFGD_SET
operation	write
task	0x01
address	1
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_CFGD_SET
DOL	KLYS:$(AREA):$(LOCATION):CFGD_SET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# WFTR_SET: Arm Waveform Trigger bit (Bit 3)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):WFTR_SET
operation	record
DESC	Arm Waveform Trig (Set)
FLNK	KLYS:$(AREA):$(LOCATION):WFTR_SET_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):WFTR_SET_MASK
DESC	Arm Waveform Trig (Set)
INPA	KLYS:$(AREA):$(LOCATION):WFTR_SET
CALC	A << 3
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_WFTR_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_WFTR_SET
operation	write
task	0x01
address	1
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_WFTR_SET
DOL	KLYS:$(AREA):$(LOCATION):WFTR_SET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# AVTR_SET: Arm Average Trigger bit (Bit 4)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):AVTR_SET
operation	record
DESC	Arm Average Trig (Set)
FLNK	KLYS:$(AREA):$(LOCATION):AVTR_SET_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):AVTR_SET_MASK
DESC	Arm Average Trig (Set)
INPA	KLYS:$(AREA):$(LOCATION):AVTR_SET
CALC	A << 4
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_AVTR_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_AVTR_SET
operation	write
task	0x01
address	1
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_AVTR_SET
DOL	KLYS:$(AREA):$(LOCATION):AVTR_SET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# Control Set Register (END)
#-------------------------------------------------------
# Control Reset Register (BEGIN)
#-------------------------------------------------------
# PERMIT_RSET: Reset the PERMIT bit (Bit 0)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):PERMIT_RSET
operation	record
DESC	Permit set
FLNK	KLYS:$(AREA):$(LOCATION):PERMIT_RSET_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):PERMIT_RSET_MASK
DESC	Clear FADC Latch
INPA	KLYS:$(AREA):$(LOCATION):PERMIT_RSET
CALC	A
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_PERMIT_RSET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_PERMIT_RSET
operation	write
task	0x01
address	2
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_PERMIT_RSET
DOL	KLYS:$(AREA):$(LOCATION):PERMIT_RSET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# TREN_RSET: Reset Trigger Enable bit (Bit 1)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):TREN_RSET
operation	record
DESC	Trigger Enable (Set)
FLNK	KLYS:$(AREA):$(LOCATION):TREN_RSET_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TREN_RSET_MASK
DESC	Triggen Enable (Set)
INPA	KLYS:$(AREA):$(LOCATION):TREN_RSET
CALC	A << 1
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_TREN_RSET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_TREN_RSET
operation	write
task	0x01
address	2
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_TREN_RSET
DOL	KLYS:$(AREA):$(LOCATION):TREN_RSET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# CFGD_RSET: Reset Configured bit (Bit 2)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):CFGD_RSET
operation	record
DESC	Configured (Set)
FLNK	KLYS:$(AREA):$(LOCATION):CFGD_RSET_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):CFGD_RSET_MASK
DESC	Configured (Set)
INPA	KLYS:$(AREA):$(LOCATION):CFGD_RSET
CALC	A << 2
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_CFGD_RSET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_CFGD_RSET
operation	write
task	0x01
address	2
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_CFGD_RSET
DOL	KLYS:$(AREA):$(LOCATION):CFGD_RSET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# WFTR_RSET: Reset Arm Waveform Trigger bit (Bit 3)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):WFTR_RSET
operation	record
DESC	Arm Waveform Trig (Set)
FLNK	KLYS:$(AREA):$(LOCATION):WFTR_RSET_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):WFTR_RSET_MASK
DESC	Arm Waveform Trig (Set)
INPA	KLYS:$(AREA):$(LOCATION):WFTR_RSET
CALC	A << 3
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_WFTR_RSET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_WFTR_RSET
operation	write
task	0x01
address	2
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_WFTR_RSET
DOL	KLYS:$(AREA):$(LOCATION):WFTR_RSET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# AVTR_RSET: Reset Arm Average Trigger bit (Bit 4)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):AVTR_RSET
operation	record
DESC	Arm Average Trig (Set)
FLNK	KLYS:$(AREA):$(LOCATION):AVTR_RSET_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):AVTR_RSET_MASK
DESC	Arm Average Trig (Set)
INPA	KLYS:$(AREA):$(LOCATION):AVTR_RSET
CALC	A << 4
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_AVTR_RSET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):CTRL_AVTR_RSET
operation	write
task	0x01
address	2
size	1
DESC	MKSU Control (write)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL_AVTR_RSET
DOL	KLYS:$(AREA):$(LOCATION):AVTR_RSET_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# Control Reset Register (END)
#-------------------------------------------------------
# Modulator State Register (BEGIN)
#-------------------------------------------------------
# MOD_SET: Modulator State Set (Bits 0-3)
#-------------------------------------------------------
record	mbbo
name	KLYS:$(AREA):$(LOCATION):MOD_SET
operation	write
task	0x01
address	3
size	1
DESC	Modulator State (Set)
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MOD_SET
ONVL	1
TWVL	2
THVL	3
FRVL	4
ONST	Maintenance
TWST	Offline
THST	Stand By
FRST	Accelerate
PRIO	LOW
#-------------------------------------------------------
# Modulator State Register (END)
#=======================================================
#
# CONTROL BLOCK (READ)
#
# The status register is read in the STATUS record,
# which FLNKs to calc records to extract individual
# bits, identified by the bi records
#
#=======================================================
# Status Register (BEGIN)
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):STATUS
operation	read
task	0x41
address	0
size	1
DESC	MKSU Status
DTYP	asynInt32
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS
FLNK	KLYS:$(AREA):$(LOCATION):PERMIT_MASK
SCAN	$(SCAN)
PRIO	LOW
#-------------------------------------------------------
# PERMIT: Permit (Bit 0)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):PERMIT_MASK
DESC	Permit Status
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	A & (1 << 0)
FLNK	KLYS:$(AREA):$(LOCATION):PERMIT
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):PERMIT
operation	record
DESC	Permit Status
INP	KLYS:$(AREA):$(LOCATION):PERMIT_MASK
ZNAM	No Permit
ONAM	Permit
FLNK	KLYS:$(AREA):$(LOCATION):TREN_MASK
PRIO	LOW
#-------------------------------------------------------
# TREN: Trigger Enable (Bit 1)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TREN_MASK
DESC	Trigger Enable Status
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 1)) >> 1
PRIO	LOW
FLNK	KLYS:$(AREA):$(LOCATION):TREN
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):TREN
operation	record
DESC	Trigger Enable Status
INP	KLYS:$(AREA):$(LOCATION):TREN_MASK
ZNAM	Not Enabled
ONAM	Enabled
FLNK	KLYS:$(AREA):$(LOCATION):CFGD_MASK
PRIO	LOW
#-------------------------------------------------------
# CFGD: Configured (Bit 2)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):CFGD_MASK
DESC	Configured Status
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 2)) >> 2
FLNK	KLYS:$(AREA):$(LOCATION):CFGD
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):CFGD
operation	record
DESC	Configured Status
INP	KLYS:$(AREA):$(LOCATION):CFGD_MASK
ZNAM	Not Configured
ONAM	Configured
FLNK	KLYS:$(AREA):$(LOCATION):RATE119_MASK
PRIO	LOW
#-------------------------------------------------------
# MOD: Modulator State (Bit 3, 4 & 5)
# Duplicate (see Modulator State Register)
#-------------------------------------------------------
#-------------------------------------------------------
# RATE1119: 119MHz or 125MHz Present (Bit 6)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):RATE119_MASK
DESC	119MHz Present
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 6)) >> 6
FLNK	KLYS:$(AREA):$(LOCATION):RATE119
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):RATE119
operation	record
DESC	119MHz Present
INP	KLYS:$(AREA):$(LOCATION):RATE119_MASK
ZNAM	125MHz
ONAM	119MHz
FLNK	KLYS:$(AREA):$(LOCATION):CLCKD_MASK
PRIO	LOW
#-------------------------------------------------------
# CLCKD: SysClock PLL Locked (Bit 7)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):CLCKD_MASK
DESC	Sys Clck PLL Lckd
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 7)) >> 7
FLNK	KLYS:$(AREA):$(LOCATION):CLCKD
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):CLCKD
operation	record
DESC	Sys Clck PLL Lckd
INP	KLYS:$(AREA):$(LOCATION):CLCKD_MASK
ZNAM	Not Locked
ONAM	Locked
FLNK	KLYS:$(AREA):$(LOCATION):LOCAL_MASK
#-------------------------------------------------------
# LOCAL: Local Mode (Bit 8)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):LOCAL_MASK
DESC	Local Mode
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 8)) >> 8
FLNK	KLYS:$(AREA):$(LOCATION):LOCAL
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):LOCAL
operation	record
DESC	Local Mode
INP	KLYS:$(AREA):$(LOCATION):LOCAL_MASK
ZNAM	Remote
ONAM	Local
FLNK	KLYS:$(AREA):$(LOCATION):FCLCKD_MASK
PRIO	LOW
#-------------------------------------------------------
# FCLCKD: FAST ADC Data Clock PLL Locked (Bit 9)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FCLCKD_MASK
DESC	FADC Clck PLL Lckd
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 9)) >> 9
FLNK	KLYS:$(AREA):$(LOCATION):FCLCKD
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):FCLCKD
operation	record
DESC	FADC Clck PLL Lckd
INP	KLYS:$(AREA):$(LOCATION):FCLCKD_MASK
ZNAM	Not Locked
ONAM	Locked
FLNK	KLYS:$(AREA):$(LOCATION):CLCKDL_MASK
PRIO	LOW
#-------------------------------------------------------
# CLCKDL: Sys Clock PLL Not Locked Latch (Bit 10)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):CLCKDL_MASK
DESC	Clck PLL Not Lckd Latch
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 10)) >> 10
FLNK	KLYS:$(AREA):$(LOCATION):CLCKDL
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):CLCKDL
operation	record
DESC	Clkc PLL Not Lckd Latch
INP	KLYS:$(AREA):$(LOCATION):CLCKDL_MASK
ZNAM	Not Latch
ONAM	Latch
PRIO	LOW
#-------------------------------------------------------
# FCLCKDL: FAST ADC Data Clock PLL Not Locked Latch (Bit 11)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FCLCKDL_MASK
DESC	FADC PLL Not Lckd Latch
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 10)) >> 10
FLNK	KLYS:$(AREA):$(LOCATION):FCLCKDL
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):FCLCKDL
operation	record
DESC	Clkc PLL Locked Latch
INP	KLYS:$(AREA):$(LOCATION):FCLCKDL_MASK
ZNAM	Not Latch
ONAM	Latch
PRIO	LOW
#-------------------------------------------------------
# Status Register (END)
#=======================================================
# Control Register (BEGIN)
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):CTRL
operation	read
task	0x41
address	1
size	1
DESC	MKSU Control
DTYP	asynInt32
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))CTRL
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_WFTR_MASK
SCAN	$(SCAN)
PRIO	LOW
#-------------------------------------------------------
# WFTR: Arm Waveform Trigger (Bit 3)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):CTRL_WFTR_MASK
DESC	Arm Waveform Trigger
INPA	KLYS:$(AREA):$(LOCATION):CTRL
CALC	(A & (1 << 3)) >> 3
FLNK	KLYS:$(AREA):$(LOCATION):WFTR
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):WFTR
operation	record
DESC	Arm Waveform Trigger
INP	KLYS:$(AREA):$(LOCATION):CTRL_WFTR_MASK
ZNAM	No
ONAM	Yes
FLNK	KLYS:$(AREA):$(LOCATION):CTRL_AVTR_MASK
PRIO	LOW
#-------------------------------------------------------
# AVTR: Arm Average Trigger (Bit 4)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):CTRL_AVTR_MASK
DESC	Arm Waveform Trigger
INPA	KLYS:$(AREA):$(LOCATION):CTRL
CALC	(A & (1 << 4)) >> 4
FLNK	KLYS:$(AREA):$(LOCATION):AVTR
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):AVTR
operation	record
DESC	Arm Waveform Trigger
INP	KLYS:$(AREA):$(LOCATION):CTRL_AVTR_MASK
ZNAM	No
ONAM	Yes
PRIO	LOW
#-------------------------------------------------------
# Control Register (END)
#-------------------------------------------------------
# Modulator State Register (BEGIN)
#-------------------------------------------------------
# MOD: Modulator State Set (Bits 0-3)
#-------------------------------------------------------
record	mbbi
name	KLYS:$(AREA):$(LOCATION):MOD
operation	write
task	0x41
address	2
size	1
DESC	Modulator State (Read)
DTYP	asynInt32
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MOD
ONVL	1
TWVL	2
THVL	3
FRVL	4
ONST	Maintenance
TWST	Offline
THST	Stand By
FRST	Accelerate
PRIO	LOW
SCAN	$(SCAN)
#-------------------------------------------------------
# Modulator State Register (END)
#=======================================================
# SLOW MONITOR ADC (WRITE)
#=======================================================
#=======================================================
# Status Register (BEGIN)
#-------------------------------------------------------
# KVAC_LO_CLR: Clear Klys Vac Low (Bit 0)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):KVAC_LO_CLR
operation	record
DESC	Clear Klys Vac Low
FLNK	KLYS:$(AREA):$(LOCATION):KVAC_LO_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):KVAC_LO_CLR_MASK
DESC	Clear Klys Vac Low
INPA	KLYS:$(AREA):$(LOCATION):KVAC_LO_CLR
CALC	A
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_KVAC_LO_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_KVAC_LO_SET
operation	write
task	0x01
address	0
size	1
DESC	Clear Klys Vac Low
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_KVAC_LO_SET
DOL	KLYS:$(AREA):$(LOCATION):KVAC_LO_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# KVAC_HI_CLR: Clear Klys Vac High (Bit 1)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):KVAC_HI_CLR
operation	record
DESC	Clear Klys Vac High
FLNK	KLYS:$(AREA):$(LOCATION):KVAC_HI_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):KVAC_HI_CLR_MASK
DESC	Clear Klys Vac Low
INPA	KLYS:$(AREA):$(LOCATION):KVAC_HI_CLR
CALC	A << 1
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_KVAC_HI_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_KVAC_HI_SET
operation	write
task	0x01
address	0
size	1
DESC	Clear Klys Vac High
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_KVAC_HI_SET
DOL	KLYS:$(AREA):$(LOCATION):KLYS_HI_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# WVAC_LO_CLR: Clear Waveguide Vacuum Low (Bit 2)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):WVAC_LO_CLR
operation	record
DESC	Clear Waveguide Vacuum Low
FLNK	KLYS:$(AREA):$(LOCATION):WVAC_LO_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):WVAC_LO_CLR_MASK
DESC	Clear Waveguide Vacuum Low
INPA	KLYS:$(AREA):$(LOCATION):WVAC_LO_CLR
CALC	A << 2
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_WVAC_LO_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_WVAC_LO_SET
operation	write
task	0x01
address	0
size	1
DESC	Clear Waveguide Vacuum Low
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_WVAC_LO_SET
DOL	KLYS:$(AREA):$(LOCATION):WVAC_LO_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# WVAC_HI_CLR: Clear Waveguide Vacuum High (Bit 3)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):WVAC_HI_CLR
operation	record
DESC	Clear Waveguide Vacuum High
FLNK	KLYS:$(AREA):$(LOCATION):WVAC_HI_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):WVAC_HI_CLR_MASK
DESC	Clear Waveguide Vacuum High
INPA	KLYS:$(AREA):$(LOCATION):WVAC_HI_CLR
CALC	A << 3
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_WVAC_HI_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_WVAC_HI_SET
operation	write
task	0x01
address	0
size	1
DESC	Clear Waveguide Vacuum High
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_WVAC_HI_SET
DOL	KLYS:$(AREA):$(LOCATION):WVAC_HI_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# FC_LO_CLR: Clear Focus Coil Current Low (Bit 4)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):FC_LO_CLR
operation	record
DESC	Clear Focus Coil Cur Low
FLNK	KLYS:$(AREA):$(LOCATION):FC_LO_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FC_LO_CLR_MASK
DESC	Clear Focus Coil Cur Low
INPA	KLYS:$(AREA):$(LOCATION):FC_LO_CLR
CALC	A << 4
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_FC_LO_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_FC_LO_SET
operation	write
task	0x01
address	0
size	1
DESC	Clear Focus Coil Cur Low
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_FC_LO_SET
DOL	KLYS:$(AREA):$(LOCATION):FC_LO_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# FC_HI_CLR: Clear Focus Coil Cur High (Bit 5)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):FC_HI_CLR
operation	record
DESC	Clear Focus Coil Cur High
FLNK	KLYS:$(AREA):$(LOCATION):FC_HI_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FC_HI_CLR_MASK
DESC	Clear Focus Coil Cur High
INPA	KLYS:$(AREA):$(LOCATION):FC_HI_CLR
CALC	A << 5
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_FC_HI_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_FC_HI_SET
operation	write
task	0x01
address	0
size	1
DESC	Clear Focus Coil Cur High
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_FC_HI_SET
DOL	KLYS:$(AREA):$(LOCATION):FC_HI_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# FCG_LO_CLR: Clear Focus Coil Ground Current Low (Bit 6)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):FCG_LO_CLR
operation	record
DESC	Clear Focus Coil Gnd Cur Low
FLNK	KLYS:$(AREA):$(LOCATION):FCG_LO_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FCG_LO_CLR_MASK
DESC	Clear Focus Coil Gnd Cur Low
INPA	KLYS:$(AREA):$(LOCATION):FCG_LO_CLR
CALC	A << 6
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_FCG_LO_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_FCG_LO_SET
operation	write
task	0x01
address	0
size	1
DESC	Clear Focus Coil Gnd Cur Low
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_FCG_LO_SET
DOL	KLYS:$(AREA):$(LOCATION):FCG_LO_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# FCG_HI_CLR: Clear Focus Coil Ground Cur High (Bit 7)
#-------------------------------------------------------
record	bo
name	KLYS:$(AREA):$(LOCATION):FCG_HI_CLR
operation	record
DESC	Clear Focus Coil Gnd Cur Hi
FLNK	KLYS:$(AREA):$(LOCATION):FCG_HI_CLR_MASK
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FCG_HI_CLR_MASK
DESC	Clear Focus Coil Gnd Cur Hi
INPA	KLYS:$(AREA):$(LOCATION):FCG_HI_CLR
CALC	A << 7
FLNK	KLYS:$(AREA):$(LOCATION):STATUS_FCG_HI_SET
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):STATUS_FCG_HI_SET
operation	write
task	0x01
address	0
size	1
DESC	Clear Focus Coil Gnd Cur Hi
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_FCG_HI_SET
DOL	KLYS:$(AREA):$(LOCATION):FCG_HI_CLR_MASK
OMSL	closed_loop
PRIO	LOW
#-------------------------------------------------------
# Status Register (END)
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):KVAC_HI_SET
operation	write
task	0x03
address	1
size	1
DESC	Klystron Vacuum High Set
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))KVAC_HI_SET
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):KVAC_LO_SET
operation	write
task	0x03
address	2
size	1
DESC	Klystron Vacuum Low Set
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))KVAC_LO_SET
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):WVAC_HI_SET
operation	write
task	0x03
address	3
size	1
DESC	Waveguide Vacuum High Set
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))WVAC_HI_SET
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):WVAC_LO_SET
operation	write
task	0x03
address	4
size	1
DESC	Waveguide Vacuum Low Set
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))WVAC_LO_SET
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):FC_HI_SET
operation	write
task	0x03
address	5
size	1
DESC	Focus Coil Current High Set
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FC_HI_SET
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):FC_LO_SET
operation	write
task	0x03
address	6
size	1
DESC	Focus Coil Current Low Set
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FC_LO_SET
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):FCG_HI_SET
operation	write
task	0x03
address	7
size	1
DESC	Focus Coil Gnd Cur High Set
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FCG_HI_SET
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):FCG_LO_SET
operation	write
task	0x03
address	8
size	1
DESC	Focus Coil Gnd Cur Low Set
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FCG_LO_SET
EGU	Torr
PRIO	LOW
#=======================================================
# SLOW MONITOR ADC (READ)
#=======================================================
# Status Register (BEGIN)
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):STATUS_SLOW
operation	read
task	0x43
address	0
size	1
DESC	Slow Monitor ADC Status
DTYP	asynInt32
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))STATUS_SLOW
FLNK	KLYS:$(AREA):$(LOCATION):KVAC_LO_MASK
SCAN	$(SCAN)
PRIO	LOW
#-------------------------------------------------------
# KVAC_LO: Klystron Vacuum Low (Bit 0)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):KVAC_LO_MASK
DESC	Klystron Vacuum Low
INPA	KLYS:$(AREA):$(LOCATION):STATUS_SLOW
CALC	A & (1 << 0)
FLNK	KLYS:$(AREA):$(LOCATION):KVAC_LO_BIT
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):KVAC_LO_BIT
operation	record
DESC	Klystron Vacuum Low
INP	KLYS:$(AREA):$(LOCATION):KVAC_LO_MASK
ZNAM	Ok
ONAM	Low
FLNK	KLYS:$(AREA):$(LOCATION):KVAC_HI_MASK
PRIO	LOW
#-------------------------------------------------------
# KVAC_HI: Klystron Vacuum High (Bit 1)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):KVAC_HI_MASK
DESC	Klystron Vacuum High
INPA	KLYS:$(AREA):$(LOCATION):STATUS_SLOW
CALC	(A & (1 << 1)) >> 1
PRIO	LOW
FLNK	KLYS:$(AREA):$(LOCATION):KVAC_HI_BIT
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):KVAC_HI_BIT
operation	record
DESC	Klystron Vacuum High
INP	KLYS:$(AREA):$(LOCATION):KVAC_HI_MASK
ZNAM	Ok
ONAM	High
FLNK	KLYS:$(AREA):$(LOCATION):WVAC_LO_MASK
PRIO	LOW
#-------------------------------------------------------
# WVAC_LO: Waveguide Vacuum Low (Bit 2)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):WVAC_LO_MASK
DESC	Waveguide Vacuum Low
INPA	KLYS:$(AREA):$(LOCATION):STATUS_SLOW
CALC	(A & (1 << 2)) >> 2
FLNK	KLYS:$(AREA):$(LOCATION):WVAC_LO_BIT
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):WVAC_LO_BIT
operation	record
DESC	Waveguide Vacuum Low
INP	KLYS:$(AREA):$(LOCATION):WVAC_LO_MASK
ZNAM	Ok
ONAM	Low
FLNK	KLYS:$(AREA):$(LOCATION):WVAC_HI_MASK
PRIO	LOW
#-------------------------------------------------------
# WVAC_HI: Waveguide Vacuum High (Bit 3)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):WVAC_HI_MASK
DESC	Waveguide Vacuum High
INPA	KLYS:$(AREA):$(LOCATION):STATUS_SLOW
CALC	(A & (1 << 3)) >> 3
FLNK	KLYS:$(AREA):$(LOCATION):WVAC_HI_BIT
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):WVAC_HI_BIT
operation	record
DESC	Waveguide Vacuum High
INP	KLYS:$(AREA):$(LOCATION):WVAC_HI_MASK
ZNAM	Ok
ONAM	High
FLNK	KLYS:$(AREA):$(LOCATION):FC_LO_MASK
PRIO	LOW
#-------------------------------------------------------
# FC_LO: Focus Coil Current Low (Bit 4)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FC_LO_MASK
DESC	Focus Coil Current Low
INPA	KLYS:$(AREA):$(LOCATION):STATUS_SLOW
CALC	(A & (1 << 4)) >> 4
FLNK	KLYS:$(AREA):$(LOCATION):FC_LO_BIT
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):FC_LO_BIT
operation	record
DESC	Focus Coil Current Low
INP	KLYS:$(AREA):$(LOCATION):FC_LO_MASK
ZNAM	Ok
ONAM	Low
FLNK	KLYS:$(AREA):$(LOCATION):FC_HI_MASK
#-------------------------------------------------------
# FC_HI: Focus Coil Current High (Bit 5)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FC_HI_MASK
DESC	Focus Coil Current High
INPA	KLYS:$(AREA):$(LOCATION):STATUS_SLOW
CALC	(A & (1 << 5)) >> 5
FLNK	KLYS:$(AREA):$(LOCATION):FC_HI_BIT
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):FC_HI_BIT
operation	record
DESC	Focus Coil Current High
INP	KLYS:$(AREA):$(LOCATION):FC_HI_MASK
ZNAM	Ok
ONAM	High
FLNK	KLYS:$(AREA):$(LOCATION):FCG_LO_MASK
PRIO	LOW
#-------------------------------------------------------
# FCG_LO: Focus Coil Ground Current Low (Bit 6)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FCG_LO_MASK
DESC	Focus Coil Gnd Current Low
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 6)) >> 6
FLNK	KLYS:$(AREA):$(LOCATION):FCG_LO_BIT
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):FCG_LO_BIT
operation	record
DESC	Focus Coil Gnd Current Low
INP	KLYS:$(AREA):$(LOCATION):FCG_LO_MASK
ZNAM	Ok
ONAM	Low
FLNK	KLYS:$(AREA):$(LOCATION):FCG_HI_MASK
PRIO	LOW
#-------------------------------------------------------
# FCG_HI: Focus Coil Ground Current High (Bit 7)
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):FCG_HI_MASK
DESC	Focus Coil Gnd Current High
INPA	KLYS:$(AREA):$(LOCATION):STATUS
CALC	(A & (1 << 7)) >> 7
FLNK	KLYS:$(AREA):$(LOCATION):FCG_HI_BIT
PRIO	LOW
#-------------------------------------------------------
record	bi
name	KLYS:$(AREA):$(LOCATION):FCG_HI_BIT
operation	record
DESC	Focus Coil Gnd Current High
INP	KLYS:$(AREA):$(LOCATION):FCG_HI_MASK
ZNAM	Ok
ONAM	High
PRIO	LOW
#-------------------------------------------------------
# Status Register (END)
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):KVAC_HI
operation	read 
task	0x43
address	1
size	1
DESC	Klystron Vacuum High Limit
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):KVAC_LO
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))KVAC_HI
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):KVAC_LO
operation	read 
task	0x43
address	2
size	1
DESC	Klystron Vacuum Low Limit
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):KVAC_AVG
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))KVAC_LO
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):WVAC_HI
operation	read 
task	0x43
address	3
size	1
DESC	Waveguide Vacuum High Limit
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):WVAC_LO
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))WVAC_HI
EGU	Torr
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):WVAC_LO
operation	read 
task	0x43
address	4
size	1
DESC	Waveguide Vacuum Low Limit
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))WVAC_LO
EGU	Torr
FLNK	KLYS:$(AREA):$(LOCATION):FC_HI
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):FC_HI
operation	read 
task	0x43
address	5
size	1
DESC	Focus Coil Cur High Limit
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):FC_LO
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FC_HI
EGU	amps
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):FC_LO
operation	read 
task	0x43
address	6
size	1
DESC	Focus Coil Cur Low Limit
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FC_LO
EGU	amps
FLNK	KLYS:$(AREA):$(LOCATION):FCG_HI
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):FCG_HI
operation	read 
task	0x43
address	7
size	1
DESC	Focus Coil Gnd Cur Hi Limit
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):FCG_LO
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FCG_HI
EGU	amps
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):FCG_LO
operation	read 
task	0x43
address	8
size	1
DESC	Focus Coil Gnd Cur Low Limit
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FCG_LO
EGU	amps
FLNK	KLYS:$(AREA):$(LOCATION):KVAC_AVG
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):KVAC_AVG
operation	read 
task	0x43
address	9
size	1
DESC	Klystron Vacuum Average
DTYP	asynInt32
#FLNK	KLYS:$(AREA):$(LOCATION):KVAC_AVG
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))KVAC_AVG
EGU	Torr
FLNK	KLYS:$(AREA):$(LOCATION):WVAC_AVG
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):WVAC_AVG
operation	read 
task	0x43
address	10
size	1
DESC	Waveguide Vacuum Average
DTYP	asynInt32
#FLNK	KLYS:$(AREA):$(LOCATION):WVAC_AVG
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))WVAC_AVG
EGU	Torr
FLNK	KLYS:$(AREA):$(LOCATION):FC_AVG
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):FC_AVG
operation	read 
task	0x43
address	11
size	1
DESC	Focus Coil Current Average
DTYP	asynInt32
#FLNK	KLYS:$(AREA):$(LOCATION):FC_AVG
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FC_AVG
EGU	amps
FLNK	KLYS:$(AREA):$(LOCATION):FCG_AVG
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):FCG_AVG
operation	read 
task	0x43
address	12
size	1
DESC	Focus Coil Gnd Cur Average
DTYP	asynInt32
#FLNK	KLYS:$(AREA):$(LOCATION):FCG_AVG
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))FCG_AVG
EGU	amps
FLNK	KLYS:$(AREA):$(LOCATION):FCG_AVG
PRIO	LOW
#=======================================================
# VOLTAGE MONITOR (READ)
#=======================================================
#=======================================================
# TRIGGER CONTROL BLOCK (WRITE)
#=======================================================
record	ao
name	KLYS:$(AREA):$(LOCATION):WF_TDLY_DES
operation	write
task	0x05
address	0
size	1
DESC	Waveform des trigger delay
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))WF_TDLY_DES
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):TDLY_DES
operation	write
task	0x05
address	1
size	1
DESC	Remote mod des trig delay
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TDLY_DES
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):TDLY_RP_DES
operation	write
task	0x05
address	2
size	1
DESC	Rear panel des trig delay
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TDLY_RP_DES
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):TWTH_RP_DES
operation	write
task	0x05
address	3
size	1
DESC	Rear panel des trig width
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TWTH_RP_DES
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):TDLY_FP_DES
operation	write
task	0x05
address	4
size	1
DESC	Front panel des trig delay
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TDLY_FP_DES
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):TWTH_FP_DES
operation	write
task	0x05
address	5
size	1
DESC	Front panel des trig width
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TWTH_FP_DES
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):TCNT_IN_DES
operation	write
task	0x05
address	8
size	1
DESC	Input trigger des rate cnt
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TCNT_IN_DES
EGU	1KHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	ao
name	KLYS:$(AREA):$(LOCATION):TCNT_OUT_DES
operation	write
task	0x05
address	9
size	1
DESC	Output trigger des rate cnt
DTYP	asynInt32
OUT	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TCNT_OUT_DES
EGU	1KHz Ticks
PRIO	LOW
#=======================================================
# TRIGGER CONTROL BLOCK (READ)
#=======================================================
record	ai
name	KLYS:$(AREA):$(LOCATION):TDLY_WF
operation	read 
task	0x45
address	0
size	1
DESC	Waveguide trig delay
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):TDLY_WF_NS
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TDLY_WF
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TDLY_WF_NS
DESC	Waveguide trig delay (NS)
INPA	KLYS:$(AREA):$(LOCATION):TDLY_WF
EGU	ns
CALC	A/0.119
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):TDLY
operation	read 
task	0x45
address	1
size	1
DESC	Remote mod trig delay
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):TDLY_NS
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TDLY
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TDLY_NS
DESC	Remote mod trig delay (NS)
INPA	KLYS:$(AREA):$(LOCATION):TDLY
EGU	ns
CALC	A/0.119
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):TDLY_RP
operation	read 
task	0x45
address	2
size	1
DESC	Rear panel trig delay
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):TDLY_RP_NS
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TDLY_RP
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TDLY_RP_NS
DESC	Rear panel trig delay (NS)
INPA	KLYS:$(AREA):$(LOCATION):TDLY_RP
EGU	ns
CALC	A/0.119
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):TWTH_RP
operation	read 
task	0x45
address	3
size	1
DESC	Rear panel trig width
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):TWTH_RP_NS
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TWTH_RP
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TWTH_RP_NS
DESC	Rear panel trig width (NS)
INPA	KLYS:$(AREA):$(LOCATION):TWTH_RP
EGU	ns
CALC	A/0.119
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):TDLY_FP
operation	read 
task	0x45
address	4
size	1
DESC	Front panel trig delay
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):TDLY_FP_NS
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TDLY_FP
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TDLY_FP_NS
DESC	Front panel trig delay (NS)
INPA	KLYS:$(AREA):$(LOCATION):TDLY_FP
EGU	ns
CALC	A/0.119
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):TWTH_FP
operation	read 
task	0x45
address	5
size	1
DESC	Front panel trig width
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):TWTH_FP_NS
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TWTH_FP
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TWTH_FP_NS
DESC	Front panel trig width (NS)
INPA	KLYS:$(AREA):$(LOCATION):TWTH_FP
EGU	ns
CALC	A/0.119
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):TDLY_LOC
operation	read 
task	0x45
address	6
size	1
DESC	Local trigger delay
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):TDLY_LOC_NS
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TDLY_LOC
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TDLY_LOC_NS
DESC	Local trigger delay (NS)
INPA	KLYS:$(AREA):$(LOCATION):TDLY_LOC
EGU	ns
CALC	A/0.119
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):TDLY_ACT
operation	read 
task	0x45
address	7
size	1
DESC	Actual trigger delay
DTYP	asynInt32
FLNK	KLYS:$(AREA):$(LOCATION):TDLY_ACT_NS
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TDLY_ACT
EGU	119MHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):TDLY_ACT_NS
DESC	Actual trigger delay (NS)
INPA	KLYS:$(AREA):$(LOCATION):TDLY_ACT
EGU	ns
CALC	A/0.119
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):TCNT_IN
operation	read 
task	0x45
address	8
size	1
DESC	Input trigger rate count
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TCNT_IN
EGU	1KHz Ticks
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):TCNT_OUT
operation	read 
task	0x45
address	8
size	1
DESC	Input trigger rate count
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))TCNT_IN
EGU	1KHz Ticks
PRIO	LOW
#=======================================================
# SYSTEM INFO BLOCK (READ)
#=======================================================
record	waveform
name	KLYS:$(AREA):$(LOCATION):SYS_VERSION
operation	read
task	0x64
address	0
size	8
DESC	Firmware version
DTYP	asynInt8Array
FTVL	UCHAR
NELM	8
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))SYS_VERSION
PRIO	LOW
#-------------------------------------------------------
record	waveform
name	KLYS:$(AREA):$(LOCATION):SYS_ID
operation	read
task	0x64
address	4
size	6
DESC	System ID
DTYP	asynInt8Array
FTVL	UCHAR
NELM	6
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))SYS_ID
PRIO	LOW
#-------------------------------------------------------
record	waveform
name	KLYS:$(AREA):$(LOCATION):SYS_SUB_TYPE
operation	read
task	0x64
address	7
size	4
DESC	System sub type
DTYP	asynInt8Array
FTVL	UCHAR
NELM	4
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))SYS_SUB_TYPE
PRIO	LOW
#-------------------------------------------------------
record	waveform
name	KLYS:$(AREA):$(LOCATION):SYS_DATE
operation	read
task	0x64
address	9
size	8
DESC	System date
DTYP	asynInt8Array
FTVL	UCHAR
NELM	8
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))SYS_DATE
PRIO	LOW
#=======================================================
# RF LOOKUP TABLE BLOCK (WRITE)
#=======================================================
record	waveform
name	KLYS:$(AREA):$(LOCATION):RF_DRV_SET
operation	write
task	0x27
address	0
size	256
DESC	RF drive lookup table
DTYP	asynInt16Array
FTVL	SHORT
NELM	256
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))RF_DRV_SET
PRIO	LOW
#=======================================================
# RF LOOKUP TABLE BLOCK (READ)
#=======================================================
record	waveform
name	KLYS:$(AREA):$(LOCATION):RF_DRV
operation	read
task	0x67
address	0
size	256
DESC	RF drive lookup table
DTYP	asynInt16Array
FTVL	SHORT
NELM	256
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))RF_DRV
PRIO	LOW
#=======================================================
# VOLTAGE MONITOR BLOCK (READ)
#=======================================================
record	ai
name	KLYS:$(AREA):$(LOCATION):MK_P24_RAW
operation	read 
task	0x62
address	0
size	1
DESC	24V Raw Reading
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MK_P24_RAW
EGU	counts
FLNK	KLYS:$(AREA):$(LOCATION):MK_P24
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):MK_P24
DESC	MKSU 24V Reading
INPA	KLYS:$(AREA):$(LOCATION):MK_P24_RAW
EGU	V
CALC	A * 0.213
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):MK_P15_RAW
operation	read 
task	0x62
address	1
size	1
DESC	15V Raw Reading
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MK_P15_RAW
EGU	counts
FLNK	KLYS:$(AREA):$(LOCATION):MK_P15
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):MK_P15
DESC	MKSU 15V Reading
INPA	KLYS:$(AREA):$(LOCATION):MK_P15_RAW
EGU	V
CALC	A * 0.133
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):MK_P5_RAW
operation	read 
task	0x62
address	2
size	1
DESC	5V Raw Reading
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MK_P5_RAW
EGU	counts
FLNK	KLYS:$(AREA):$(LOCATION):MK_P5
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):MK_P5
DESC	MKSU 5V Reading
INPA	KLYS:$(AREA):$(LOCATION):MK_P5_RAW
EGU	V
CALC	A * 0.477
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):MK_P3D3_RAW
operation	read 
task	0x62
address	3
size	1
DESC	3.3V Raw Reading
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MK_P3D3_RAW
EGU	counts
FLNK	KLYS:$(AREA):$(LOCATION):MK_P3D3
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):MK_P3D3
DESC	MKSU 3.3V Reading
INPA	KLYS:$(AREA):$(LOCATION):MK_P3D3_RAW
EGU	V
CALC	A * 0.00313
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):MK_P2D5_RAW
operation	read 
task	0x62
address	4
size	1
DESC	2.5V Raw Reading
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MK_P2D5_RAW
EGU	counts
FLNK	KLYS:$(AREA):$(LOCATION):MK_P2D5
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):MK_P2D5
DESC	MKSU 2.5V Reading
INPA	KLYS:$(AREA):$(LOCATION):MK_P2D5_RAW
EGU	V
CALC	A * 0.00237
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):MK_N5_RAW
operation	read 
task	0x62
address	5
size	1
DESC	-5V Raw Reading
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MK_N5_RAW
EGU	counts
FLNK	KLYS:$(AREA):$(LOCATION):MK_N5
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):MK_N5
DESC	MKSU -5V Reading
INPA	KLYS:$(AREA):$(LOCATION):MK_N5_RAW
EGU	V
CALC	A * -0.00511
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):MK_N15_RAW
operation	read 
task	0x62
address	6
size	1
DESC	-15V Raw Reading
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MK_N15_RAW
EGU	counts
FLNK	KLYS:$(AREA):$(LOCATION):MK_N15
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):MK_N15
DESC	MKSU -15V Reading
INPA	KLYS:$(AREA):$(LOCATION):MK_N15_RAW
EGU	V
CALC	A * -0.0158
PRIO	LOW
#-------------------------------------------------------
record	ai
name	KLYS:$(AREA):$(LOCATION):MK_N24_RAW
operation	read 
task	0x62
address	7
size	1
DESC	-24V Raw Reading
DTYP	asynInt32
SCAN	$(SCAN)
INP	@asyn($(PORT) $(CHANNEL) $(TIMEOUT))MK_N24_RAW
EGU	counts
FLNK	KLYS:$(AREA):$(LOCATION):MK_N24
PRIO	LOW
#-------------------------------------------------------
record	calc
operation	record
name	KLYS:$(AREA):$(LOCATION):MK_N24
DESC	MKSU -24V Reading
INPA	KLYS:$(AREA):$(LOCATION):MK_N24_RAW
EGU	V
CALC	A * -0.0257
PRIO	LOW
#-------------------------------------------------------
